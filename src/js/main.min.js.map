{"version":3,"sources":["closePopup.js","createMap.js","createRequest.js","maskPhone.js","sendForm.js","showCallback.js","showPolicy.js","showThanks.js"],"names":["closePopup","document","querySelectorAll","forEach","item","classList","remove","popupWrapper","querySelector","addEventListener","event","target","matches","closest","key","spinner","isLoad","initMap","myMapTemp","ymaps","Map","center","zoom","controls","myPlacemarkTemp","Placemark","balloonContent","iconLayout","iconImageHref","iconImageSize","iconImageOffset","geoObjects","add","behaviors","disable","waitForTilesLoad","layers","get","then","layer","vow","Promise","resolve","reject","tc","getTileContainer","readyAll","tiles","each","tile","number","isReady","events","once","k","hasOwnProperty","tileContainer","CanvasContainer","DomContainer","loadScript","url","callback","script","createElement","onload","src","getElementsByTagName","appendChild","ymap","load","createRequest","data","fetch","method","headers","Content-Type","body","JSON","stringify","maskPhone","selector","masked","arguments","length","undefined","mask","keyCode","template","def","replace","val","this","value","i","newValue","a","charAt","indexOf","slice","reg","substr","RegExp","test","type","_iterator","_createForOfIteratorHelper","s","_step","n","done","elem","err","e","f","sendForm","form","statusMessage","innerHTML","input","button","buttonText","preventDefault","textContent","style","border","formData","FormData","Object","fromEntries","response","ok","Error","showThanks","error","console","setTimeout","showCallback","popupCallback","showPolicy","popupPolicy","privacyPolicy","popupThanks"],"mappings":"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","file":"main.min.js","sourcesContent":["const closePopup = () => {\r\n  const popupActive = document.querySelectorAll('.popup--active');\r\n\r\n  popupActive.forEach(item => item.classList.remove('popup--active'));\r\n};\r\n\r\nconst popupWrapper = document.querySelector('.popup__wrapper');\r\n\r\npopupWrapper.addEventListener('click', event => {\r\n  if (event.target.matches('.popup__close') || !event.target.closest('.popup__content')) {\r\n    closePopup();\r\n  }\r\n});\r\n\r\ndocument.addEventListener('keydown', event => {\r\n  if (event.key === 'Escape' && document.querySelector('.popup--active')) {\r\n    closePopup();\r\n  }\r\n});\r\n","const spinner = document.querySelector('.loader');\r\nlet isLoad = false;\r\n\r\nfunction initMap() {\r\n  const myMapTemp = new ymaps.Map('map-yandex', {\r\n    center: [55.16415008, 61.29303178],\r\n    zoom: 16,\r\n    controls: ['zoomControl']\r\n  });\r\n\r\n  const myPlacemarkTemp = new ymaps.Placemark([55.16415008, 61.29303178], {\r\n    balloonContent: \"Челябинск, ул. Академика Королева, 38\",\r\n  }, {\r\n    iconLayout: 'default#imageWithContent',\r\n    iconImageHref: './img/contacts/icon/icon-map-marker.png',\r\n    iconImageSize: [32, 32],\r\n    iconImageOffset: [-16, -32],\r\n  });\r\n\r\n  myMapTemp.geoObjects.add(myPlacemarkTemp);\r\n  myMapTemp.behaviors.disable('scrollZoom');\r\n\r\n  const layer = myMapTemp.layers.get(0).get(0);\r\n\r\n  waitForTilesLoad(layer).then(() => {\r\n    spinner.classList.remove('loader--active');\r\n  });\r\n}\r\n\r\nfunction waitForTilesLoad(layer) {\r\n  return new ymaps.vow.Promise((resolve, reject) => {\r\n    const tc = getTileContainer(layer);\r\n    let readyAll = true;\r\n\r\n    tc.tiles.each((tile, number) => {\r\n      if (!tile.isReady()) {\r\n        readyAll = false;\r\n      }\r\n    });\r\n\r\n    if (readyAll) {\r\n      resolve();\r\n    } else {\r\n      tc.events.once(\"ready\", () => {\r\n        resolve();\r\n      });\r\n    }\r\n  });\r\n}\r\n\r\nfunction getTileContainer(layer) {\r\n  for (const k in layer) {\r\n    if (layer.hasOwnProperty(k)) {\r\n      if (layer[k] instanceof ymaps.layer.tileContainer.CanvasContainer ||\r\n        layer[k] instanceof ymaps.layer.tileContainer.DomContainer\r\n      ) {\r\n        return layer[k];\r\n      }\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction loadScript(url, callback) {\r\n  const script = document.createElement(\"script\");\r\n  script.onload = () => callback();\r\n  script.src = url;\r\n  document.getElementsByTagName(\"head\")[0].appendChild(script);\r\n}\r\n\r\nconst ymap = () => {\r\n  const contactsMap = document.querySelector('.contacts__map');\r\n\r\n  contactsMap.addEventListener('mouseenter', () => {\r\n    if (!isLoad) {\r\n      isLoad = true;\r\n      spinner.classList.add('loader--active');\r\n\r\n      loadScript(\"https://api-maps.yandex.ru/2.1/?lang=ru_RU&amp;loadByRequire=1\", () => {\r\n        ymaps.load(initMap);\r\n      });\r\n    }\r\n  });\r\n};\r\n\r\nymap();\r\n","const createRequest = data => fetch('./php/server.php', {\r\n  method: 'POST',\r\n  headers: {\r\n    'Content-Type': 'appliction/json',\r\n  },\r\n  body: JSON.stringify(data)\r\n});\r\n","function maskPhone(selector, masked = '+7 (___) ___-__-__') {\r\n  const elems = document.querySelectorAll(selector);\r\n\r\n  function mask(event) {\r\n    const keyCode = event.keyCode;\r\n    const template = masked,\r\n      def = template.replace(/\\D/g, \"\"),\r\n      val = this.value.replace(/\\D/g, \"\");\r\n\r\n    let i = 0,\r\n      newValue = template.replace(/[_\\d]/g, a => (i < val.length ? val.charAt(i++) || def.charAt(i) : a));\r\n    i = newValue.indexOf(\"_\");\r\n\r\n    if (i !== -1) {\r\n      newValue = newValue.slice(0, i);\r\n    }\r\n\r\n    let reg = template.substr(0, this.value.length).replace(/_+/g,\r\n      a => \"\\\\d{1,\" + a.length + \"}\").replace(/[+()]/g, \"\\\\$&\");\r\n    reg = new RegExp(\"^\" + reg + \"$\");\r\n\r\n    if (!reg.test(this.value) || this.value.length < 5 || keyCode > 47 && keyCode < 58) {\r\n      this.value = newValue;\r\n    }\r\n\r\n    if (event.type === \"blur\" && this.value.length < 5) {\r\n      this.value = \"\";\r\n    }\r\n  }\r\n\r\n  for (const elem of elems) {\r\n    elem.addEventListener(\"input\", mask);\r\n    elem.addEventListener(\"focus\", mask);\r\n    elem.addEventListener(\"blur\", mask);\r\n  }\r\n}\r\n\r\nmaskPhone('input[type=\"tel\"]');\r\n","const sendForm = () => {\r\n  const form = document.querySelectorAll('.form'),\r\n    statusMessage = document.createElement('div');\r\n\r\n  statusMessage.innerHTML = `\r\n    <div class='sk-bounce-1 sk-child'></div>\r\n    <div class='sk-bounce-2 sk-child'></div>\r\n    <div class='sk-bounce-3 sk-child'></div>`;\r\n\r\n  form.forEach(item => {\r\n    const input = item.querySelector('input[type=\"tel\"]'),\r\n      button = item.querySelector('button[type=\"submit\"]');\r\n\r\n    item.addEventListener('submit', event => {\r\n      event.preventDefault();\r\n\r\n      if (input.value.length === 18) {\r\n        const buttonText = button.textContent;\r\n        input.style.border = '';\r\n\r\n        button.textContent = '';\r\n        button.appendChild(statusMessage);\r\n        statusMessage.classList.add('sk-three-bounce');\r\n\r\n        let formData = new FormData(item);\r\n        formData = Object.fromEntries(formData);\r\n\r\n        createRequest(formData).then(response => {\r\n          if (!response.ok) {\r\n            throw new Error(`Ответ сети был не ok.`);\r\n          } else if (item.closest('.popup__content.popup--active')) {\r\n            item.closest('.popup__content').classList.remove('popup--active');\r\n            item.closest('.popup__wrapper').classList.remove('popup--active');\r\n          }\r\n\r\n          showThanks();\r\n          statusMessage.classList.remove('sk-three-bounce');\r\n          button.textContent = buttonText;\r\n        }).catch(error => {\r\n          console.error(error);\r\n          button.textContent = 'Ошибка...';\r\n\r\n          setTimeout(() => {\r\n            button.textContent = buttonText;\r\n          }, 2000);\r\n        });\r\n\r\n        input.value = '';\r\n      } else {\r\n        input.style.border = '1px solid red';\r\n      }\r\n    });\r\n  });\r\n};\r\n\r\nsendForm();\r\n","const showCallback = () => {\r\n  const callback = document.querySelectorAll('.callback'),\r\n    popupWrapper = document.querySelector('.popup__wrapper'),\r\n    popupCallback = document.querySelector('.popup__content--callback');\r\n\r\n  callback.forEach(item => item.addEventListener('click', event => {\r\n    event.preventDefault();\r\n    popupCallback.classList.add('popup--active');\r\n    popupWrapper.classList.add('popup--active');\r\n  }));\r\n};\r\n\r\nshowCallback();\r\n","const showPolicy = () => {\r\n  const popupPolicy = document.querySelector('.popup__content--policy'),\r\n    popupWrapper = document.querySelector('.popup__wrapper');\r\n\r\n  popupWrapper.classList.add('popup--active');\r\n  popupPolicy.classList.add('popup--active');\r\n};\r\n\r\nconst privacyPolicy = document.querySelector('.privacy-policy');\r\n\r\nprivacyPolicy.addEventListener('click', event => {\r\n  event.preventDefault();\r\n  showPolicy();\r\n});\r\n","const showThanks = () => {\r\n  const popupThanks = document.querySelector('.popup__content--thanks'),\r\n    popupWrapper = document.querySelector('.popup__wrapper');\r\n\r\n  popupWrapper.classList.add('popup--active');\r\n  popupThanks.classList.add('popup--active');\r\n\r\n  setTimeout(() => {\r\n    popupWrapper.classList.remove('popup--active');\r\n    popupThanks.classList.remove('popup--active');\r\n  }, 2000);\r\n};\r\n"]}