{"version":3,"sources":["closePopup.js","createRequest.js","maskPhone.js","sendForm.js","showCallback.js","showPolicy.js","showThanks.js"],"names":["closePopup","document","querySelectorAll","forEach","item","classList","remove","popupWrapper","querySelector","addEventListener","event","target","matches","closest","key","createRequest","data","fetch","method","headers","Content-Type","body","JSON","stringify","maskPhone","selector","masked","arguments","length","undefined","mask","keyCode","template","def","replace","val","this","value","i","newValue","a","charAt","indexOf","slice","reg","substr","RegExp","test","type","_iterator","_createForOfIteratorHelper","s","_step","n","done","elem","err","e","f","sendForm","form","statusMessage","createElement","innerHTML","input","button","buttonText","preventDefault","textContent","style","border","appendChild","add","formData","FormData","Object","fromEntries","then","response","ok","Error","showThanks","error","console","setTimeout","showCallback","callback","popupCallback","showPolicy","popupPolicy","privacyPolicy","popupThanks"],"mappings":"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","file":"main.min.js","sourcesContent":["const closePopup = () => {\r\n  const popupActive = document.querySelectorAll('.popup--active');\r\n\r\n  popupActive.forEach(item => item.classList.remove('popup--active'));\r\n};\r\n\r\nconst popupWrapper = document.querySelector('.popup__wrapper');\r\n\r\npopupWrapper.addEventListener('click', event => {\r\n  if (event.target.matches('.popup__close') || !event.target.closest('.popup__content')) {\r\n    closePopup();\r\n  }\r\n});\r\n\r\ndocument.addEventListener('keydown', event => {\r\n  if (event.key === 'Escape' && document.querySelector('.popup--active')) {\r\n    closePopup();\r\n  }\r\n});\r\n","const createRequest = data => fetch('./php/server.php', {\r\n  method: 'POST',\r\n  headers: {\r\n    'Content-Type': 'appliction/json',\r\n  },\r\n  body: JSON.stringify(data)\r\n});\r\n","function maskPhone(selector, masked = '+7 (___) ___-__-__') {\r\n  const elems = document.querySelectorAll(selector);\r\n\r\n  function mask(event) {\r\n    const keyCode = event.keyCode;\r\n    const template = masked,\r\n      def = template.replace(/\\D/g, \"\"),\r\n      val = this.value.replace(/\\D/g, \"\");\r\n\r\n    let i = 0,\r\n      newValue = template.replace(/[_\\d]/g, a => (i < val.length ? val.charAt(i++) || def.charAt(i) : a));\r\n    i = newValue.indexOf(\"_\");\r\n\r\n    if (i !== -1) {\r\n      newValue = newValue.slice(0, i);\r\n    }\r\n\r\n    let reg = template.substr(0, this.value.length).replace(/_+/g,\r\n      a => \"\\\\d{1,\" + a.length + \"}\").replace(/[+()]/g, \"\\\\$&\");\r\n    reg = new RegExp(\"^\" + reg + \"$\");\r\n\r\n    if (!reg.test(this.value) || this.value.length < 5 || keyCode > 47 && keyCode < 58) {\r\n      this.value = newValue;\r\n    }\r\n\r\n    if (event.type === \"blur\" && this.value.length < 5) {\r\n      this.value = \"\";\r\n    }\r\n  }\r\n\r\n  for (const elem of elems) {\r\n    elem.addEventListener(\"input\", mask);\r\n    elem.addEventListener(\"focus\", mask);\r\n    elem.addEventListener(\"blur\", mask);\r\n  }\r\n}\r\n\r\nmaskPhone('input[type=\"tel\"]');\r\n","const sendForm = () => {\r\n  const form = document.querySelectorAll('.form'),\r\n    statusMessage = document.createElement('div');\r\n\r\n  statusMessage.innerHTML = `\r\n    <div class='sk-bounce-1 sk-child'></div>\r\n    <div class='sk-bounce-2 sk-child'></div>\r\n    <div class='sk-bounce-3 sk-child'></div>`;\r\n\r\n  form.forEach(item => {\r\n    const input = item.querySelector('input[type=\"tel\"]'),\r\n      button = item.querySelector('button[type=\"submit\"]');\r\n\r\n    item.addEventListener('submit', event => {\r\n      event.preventDefault();\r\n\r\n      if (input.value.length === 18) {\r\n        const buttonText = button.textContent;\r\n        input.style.border = '';\r\n\r\n        button.textContent = '';\r\n        button.appendChild(statusMessage);\r\n        statusMessage.classList.add('sk-three-bounce');\r\n\r\n        let formData = new FormData(item);\r\n        formData = Object.fromEntries(formData);\r\n\r\n        createRequest(formData).then(response => {\r\n          if (!response.ok) {\r\n            throw new Error(`Ответ сети был не ok.`);\r\n          } else if (item.closest('.popup__content.popup--active')) {\r\n            item.closest('.popup__content').classList.remove('popup--active');\r\n            item.closest('.popup__wrapper').classList.remove('popup--active');\r\n          }\r\n\r\n          showThanks();\r\n          statusMessage.classList.remove('sk-three-bounce');\r\n          button.textContent = buttonText;\r\n        }).catch(error => {\r\n          console.error(error);\r\n          button.textContent = 'Ошибка...';\r\n\r\n          setTimeout(() => {\r\n            button.textContent = buttonText;\r\n          }, 2000);\r\n        });\r\n\r\n        input.value = '';\r\n      } else {\r\n        input.style.border = '1px solid red';\r\n      }\r\n    });\r\n  });\r\n};\r\n\r\nsendForm();\r\n","const showCallback = () => {\r\n  const callback = document.querySelectorAll('.callback'),\r\n    popupWrapper = document.querySelector('.popup__wrapper'),\r\n    popupCallback = document.querySelector('.popup__content--callback');\r\n\r\n  callback.forEach(item => item.addEventListener('click', event => {\r\n    event.preventDefault();\r\n    popupCallback.classList.add('popup--active');\r\n    popupWrapper.classList.add('popup--active');\r\n  }));\r\n};\r\n\r\nshowCallback();\r\n","const showPolicy = () => {\r\n  const popupPolicy = document.querySelector('.popup__content--policy'),\r\n    popupWrapper = document.querySelector('.popup__wrapper');\r\n\r\n  popupWrapper.classList.add('popup--active');\r\n  popupPolicy.classList.add('popup--active');\r\n};\r\n\r\nconst privacyPolicy = document.querySelector('.privacy-policy');\r\n\r\nprivacyPolicy.addEventListener('click', event => {\r\n  event.preventDefault();\r\n  showPolicy();\r\n});\r\n","const showThanks = () => {\r\n  const popupThanks = document.querySelector('.popup__content--thanks'),\r\n    popupWrapper = document.querySelector('.popup__wrapper');\r\n\r\n  popupWrapper.classList.add('popup--active');\r\n  popupThanks.classList.add('popup--active');\r\n\r\n  setTimeout(() => {\r\n    popupWrapper.classList.remove('popup--active');\r\n    popupThanks.classList.remove('popup--active');\r\n  }, 2000);\r\n};\r\n"]}